### CSRF 攻击

含义： 跨站请求伪造

**攻击手段**

-   使用 iframe 的形式 窃取用户信息
-   邮件中 有陌生邮件， 点击进去以后 信息被窃取 邮件被转发到黑客邮箱 07 年 gmail 漏洞
-   登录 a 网站（正规但是有漏洞） 没有登出的情况下 访问了危险网站b（通过添加图片 链接的方式） 
-   网站 b 模拟用户的请求 来窃取信息 或盗取资源

**防护手段**

1. 验证 http referer 字段  （记录了 http 请求来源的地址）
2. 请求地址增加 校验token，可以根据时间戳和请求字段等加密算法生成一个token  每次请求不一致  服务端进行验证

### 前端如何防止爬虫

-   设置验证码  增加爬虫成本
-   对于频次较高的 IP 进行封锁
-   前端打点来判断  正常用户和爬虫请求的区别在于是否会渲染html，通过前端打点可以过滤掉一些
-   敏感内容进行加密和解密

### xss 攻击

跨站脚本攻击

> 通过在目标网站上注入恶意脚本，获取用户敏感信息，进而危害数据安全，比如窃取 cookie 值，实现恶意跳转等(谷歌有过滤功能)

- 盗用cookie
- 利用iframe ，以被攻击者的身份做一些操作 ，比如加好友，发私信等
- 在访问量极大的页面 可以通过xss攻击小型网站

2011 年新浪微博爆出 xss 漏洞 导致大量用户自动关注某个账号，并自动转发某条微博。

**举一个栗子**

留言板功能：

1. 正常展示用户留言的内容

2. 如果某个时间 有人在留言内容中输入一行

    ```js
    <script>alert(“hey!you are attacked”)</script>
    ```

3. 浏览器并不知道哪些代码改变了原本程序的意图，会弹出一个信息框

### xss 攻击防护

-   限制用户输入数据的格式
-   进行html  js的字段转义
-   重要的 cookie 设置为 http only
-   http 头部信息的 Content-Security-Policy（内容安全策略）字段 来提供白名单
-   *禁止掉 "javascript:" 链接、非法 scheme 等*

#### 跨域

概念 

当前发起请求的域与该请求指向的资源所在的域不一样。

这里的域指的是这样的一个概念：我们认为若协议 + 域名 + 端口号均相同，那么就是同域。

浏览器同源限制策略  出于安全的考虑  会禁止跨域 

同源策略

协议、域名和端口 有一个不同就是不同源

1. 限制不同源的 js 脚本
2. 禁止 ajax 发送跨域请求 不能携带与本网站不同源的 cookie 请求
3. 同源的非绝对性： script link iframe video audio 等带有 src 属性的标签可以从不同的源加载资源和内容

跨域解决方式

1. jsonp
2. 代理（webpack-dev-server的 proxy   nginx）
3. cors（origin）
